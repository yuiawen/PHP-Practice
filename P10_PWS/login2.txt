<?php
include 'koneksi.php';
session_start();

$userName = $_POST['username'];
$passWord = $_POST['password'];

// Query menggunakan prepared statement untuk menghindari SQL injection
$query = "SELECT id, username, password, nama FROM admin WHERE username=? AND password=?";
$stmt = mysqli_prepare($koneksi, $query);
mysqli_stmt_bind_param($stmt, "ss", $userName, $passWord);
mysqli_stmt_execute($stmt);
$result = mysqli_stmt_get_result($stmt);

if (mysqli_num_rows($result) == 1) {
    $row = mysqli_fetch_assoc($result);
    $_SESSION['username'] = $row['username'];
    $_SESSION['nama'] = $row['nama'];

    header("Location: welcome.php");
    exit();
} else {
    echo "Username atau password salah.";
}
